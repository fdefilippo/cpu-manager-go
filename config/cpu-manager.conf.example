# CPU Manager Configuration File
# Location: /etc/cpu-manager.conf

# ========================
# PATHS
# ========================
CGROUP_ROOT=/sys/fs/cgroup
SCRIPT_CGROUP_BASE=cpu_manager
LOG_FILE=/var/log/cpu-manager.log
CREATED_CGROUPS_FILE=/var/run/cpu-manager/cgroups.txt
METRICS_CACHE_FILE=/var/run/cpu-manager/metrics.cache

# ========================
# TIMING
# ========================
POLLING_INTERVAL=30
MIN_ACTIVE_TIME=60
METRICS_CACHE_TTL=15

# ========================
# THRESHOLDS (percentages)
# ========================
CPU_THRESHOLD=75
CPU_RELEASE_THRESHOLD=40

# ========================
# CPU LIMITS (cpu.max format: "quota period")
# core_totali=Quota/Period
# Esempio:  50000 100000 -> 1/2 core
# Esempio: 300000 100000 -> 3 core
# Esempio: 200000 100000 -> 2 core completi
# ========================
CPU_QUOTA_NORMAL="max 100000"
CPU_QUOTA_LIMITED="50000 100000"

# ========================
# PROMETHEUS
# ========================
ENABLE_PROMETHEUS=true
PROMETHEUS_PORT=9100
PROMETHEUS_HOST=192.168.1.7

# Prometheus TLS/HTTPS (optional)
PROMETHEUS_TLS_ENABLED=false
PROMETHEUS_TLS_CERT_FILE=/etc/cpu-manager/tls/server.crt
PROMETHEUS_TLS_KEY_FILE=/etc/cpu-manager/tls/server.key
PROMETHEUS_TLS_CA_FILE=/etc/cpu-manager/tls/ca.crt
PROMETHEUS_TLS_MIN_VERSION=1.2

# Prometheus Authentication (optional)
# Options: none, basic, jwt, both
PROMETHEUS_AUTH_TYPE=none
PROMETHEUS_AUTH_USERNAME=prometheus
PROMETHEUS_AUTH_PASSWORD_FILE=/etc/cpu-manager/prometheus_password
PROMETHEUS_JWT_SECRET_FILE=/etc/cpu-manager/jwt_secret
PROMETHEUS_JWT_ISSUER=cpu-manager
PROMETHEUS_JWT_AUDIENCE=prometheus
PROMETHEUS_JWT_EXPIRY=3600

# ========================
# LOGGING
# ========================
LOG_LEVEL=DEBUG
LOG_MAX_SIZE=10485760
USE_SYSLOG=true

# ========================
# SYSTEM
# ========================
MIN_SYSTEM_CORES=1
SYSTEM_UID_MIN=1000
# SYSTEM_UID_MAX viene letto automaticamente da /proc/sys/kernel/pid_max

# ========================
# LOAD AVERAGE HANDLING
# ========================
# false: non attiva limiti se il sistema è già sotto carico (default conservativo)
# true: attiva limiti anche se il sistema è sotto carico (isolamento garantito)
IGNORE_SYSTEM_LOAD=true
